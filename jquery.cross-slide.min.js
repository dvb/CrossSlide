(function(){function w(a){for(var b=1;b<arguments.length;b++)a=a.replace(RegExp("\\{"+(b-1)+"}","g"),arguments[b]);return a}function e(){arguments[0]="CrossSlide: "+arguments[0];throw Error(w.apply(null,arguments));}function D(a){var b=!0,d;for(d in a){b=!1;break}return b}function E(a){var b=1,a=a.replace(/^\s*|\s*$/g,"").split(/\s+/);if(3<a.length)throw Error();"center"==a[0]&&(1==a.length?a=["center","center"]:2==a.length&&a[1].match(/^[\d.]+x$/i)&&(a=["center","center",a[1]]));3==a.length&&(b=
parseFloat(a[2].match(/^([\d.]+)x$/i)[1]));var d=a[0]+" "+a[1];return"left top"==d||"top left"==d?{xrel:0,yrel:0,zoom:b}:"left center"==d||"center left"==d?{xrel:0,yrel:0.5,zoom:b}:"left bottom"==d||"bottom left"==d?{xrel:0,yrel:1,zoom:b}:"center top"==d||"top center"==d?{xrel:0.5,yrel:0,zoom:b}:"center center"==d?{xrel:0.5,yrel:0.5,zoom:b}:"center bottom"==d||"bottom center"==d?{xrel:0.5,yrel:1,zoom:b}:"right top"==d||"top right"==d?{xrel:1,yrel:0,zoom:b}:"right center"==d||"center right"==d?{xrel:1,
yrel:0.5,zoom:b}:"right bottom"==d||"bottom right"==d?{xrel:1,yrel:1,zoom:b}:{xrel:parseInt(a[0].match(/^(\d+)%$/)[1])/100,yrel:parseInt(a[1].match(/^(\d+)%$/)[1])/100,zoom:b}}var f=jQuery,x=f.fn.startAnimation?"startAnimation":"animate";f.fn.crossSlide=function(a,b,d){var h=this,j=this.width(),i=this.height();1!=h.length&&e("crossSlide() must be called on exactly 1 element");h.get(0).crossSlideArgs=[a,b,d];b=f.map(b,function(a){return f.extend({},a)});a.easing||(a.easing=a.variant?"swing":"linear");
d||(d=function(){});(function(a){function d(e,h){h.onload=function(){f++;b[e].width=h.width;b[e].height=h.height;f==b.length&&a()};h.src=b[e].src;e+1<b.length&&d(e+1,new Image)}var f=0;d(0,new Image)})(function(){function y(a,c){var b=[0,k/(a.time_ms+2*k),1-k/(a.time_ms+2*k),1][c];return{left:Math.round(a.from.left+b*(a.to.left-a.from.left)),top:Math.round(a.from.top+b*(a.to.top-a.from.top)),width:Math.round(a.from.width+b*(a.to.width-a.from.width)),height:Math.round(a.from.height+b*(a.to.height-
a.from.height))}}function F(c,e){if(c%2==0)if(z)var h=c/2,g=(h-1+b.length)%b.length,o=l.eq(h),j=l.eq(g),g=function(){d(h,o.get(0));j.css("visibility","hidden");setTimeout(e,z)};else var i=c/2,g=(i-1+b.length)%b.length,n=l.eq(i),j=l.eq(g),q=b[i].time_ms,v=y(b[i],a.variant?3:2),g=function(){d(i,n.get(0));j.css("visibility","hidden");n[x](v,q,a.easing,e)};else{var r=Math.floor(c/2),p=Math.ceil(c/2)%b.length,A=l.eq(r),m=l.eq(p),s={},t={visibility:"visible"},u={};if(p>r){t.opacity=0;u.opacity=1;if(a.doubleFade)s.opacity=
0}else{s.opacity=0;if(a.doubleFade){t.opacity=0;u.opacity=1}}if(!z){f.extend(t,y(b[p],0));if(!a.variant){f.extend(s,y(b[r],3));f.extend(u,y(b[p],1))}}g=D(u)?function(){d(p,m.get(0),r,A.get(0));m.css(t);A[x](s,k,"linear",e)}:D(s)?function(){d(p,m.get(0),r,A.get(0));m.css(t);m[x](u,k,"linear",e)}:function(){d(p,m.get(0),r,A.get(0));m.css(t);m[x](u,k,"linear");A[x](s,k,"linear",e)}}if(a.loop&&c==b.length*2-2)var w=g,g=function(){--H&&w()};return c>0?F(c-1,g):g}a.fade||e("missing fade parameter.");a.speed&&
a.sleep&&e("you cannot set both speed and sleep at the same time.");var k=Math.round(a.fade*1E3);if(a.sleep)var z=Math.round(a.sleep*1E3);if(a.speed)var q=a.speed/1E3,v=Math.round(k*q);h.empty().css({overflow:"hidden",padding:0});/^(absolute|relative|fixed)$/.test(h.css("position"))||h.css({position:"relative"});(!h.width()||!h.height())&&e("container element does not have its own width and height");a.shuffle&&b.sort(function(){return Math.random()-0.5});for(var g=0;g<b.length;++g){var c=b[g];c.src||
e("missing src parameter in picture {0}.",g+1);var B=1;a.fill&&(B=j/i>c.width/c.height?j/c.width:i/c.height);if(q){switch(c.dir){case "up":c.from={xrel:0.5,yrel:0,zoom:1};c.to={xrel:0.5,yrel:1,zoom:1};var n=c.height-i-2*v;break;case "down":c.from={xrel:0.5,yrel:1,zoom:1};c.to={xrel:0.5,yrel:0,zoom:1};n=c.height-i-2*v;break;case "left":c.from={xrel:0,yrel:0.5,zoom:1};c.to={xrel:1,yrel:0.5,zoom:1};n=c.width-j-2*v;break;case "right":c.from={xrel:1,yrel:0.5,zoom:1};c.to={xrel:0,yrel:0.5,zoom:1};n=c.width-
j-2*v;break;default:e("missing or malformed dir parameter in picture {0}.",g+1)}n<=0&&e("impossible animation: either picture {0} is too small or div is too large or fade duration too long.",g+1);c.time_ms=Math.round(n/q)}else if(!z){(!c.from||!c.to||!c.time)&&e("missing either speed/sleep option, or from/to/time params in picture {0}.",g+1);try{c.from=E(c.from)}catch(I){e('malformed "from" parameter in picture {0}.',g+1)}try{c.to=E(c.to)}catch(J){e('malformed "to" parameter in picture {0}.',g+1)}c.time||
e('missing "time" parameter in picture {0}.',g+1);c.time_ms=Math.round(c.time*1E3)}c.from&&f.each([c.from,c.to],function(a,b){b.width=Math.round(c.width*b.zoom*B);b.height=Math.round(c.height*b.zoom*B);b.left=Math.round((j-b.width)*b.xrel);b.top=Math.round((i-b.height)*b.yrel)});var C,o;o=C=f(w('<img src="{0}"/>',c.src));c.href&&(o=f(w('<a href="{0}"></a>',c.href)).append(C));c.onclick&&o.click(c.onclick);c.alt&&C.attr("alt",c.alt);c.rel&&o.attr("rel",c.rel);c.href&&c.target&&o.attr("target",c.target);
o.appendTo(h)}delete q;var l=h.find("img").css({position:"absolute",visibility:"hidden",top:0,left:0,border:0});l.eq(0).css({visibility:"visible"});z||l.eq(0).css(y(b[0],a.variant?0:1));var H=a.loop,G=F(b.length*2-1,function(){return G()});G()});return h};f.fn.crossSlideFreeze=function(){this.find("img").stop()};f.fn.crossSlideStop=function(){this.find("img").stop().remove()};f.fn.crossSlideRestart=function(){this.find("img").stop().remove();f.fn.crossSlide.apply(this,this.get(0).crossSlideArgs)};
f.fn.crossSlidePause=function(){f.fn.pause||e("pause plugin missing.");this.find("img").pause()};f.fn.crossSlideResume=function(){f.fn.pause||e("pause plugin missing.");this.find("img").resume()}})();
